<main ng-controller="HomeCtrl as home">
    <div class="nav">
        <header class="nav-header">
            <h1 class="nav-title">Bloc Chat</h1>
        </header>

        <div>
            <h3>User: {{home.currentUser}}</h3>
        </div>

        <div class="nav-body">
            <span>
                <!-- Add new rooms button -->
                <button type="button" class="new-room-modal" ng-click="home.newRoom()">New Room</button>
            </span>

            <!-- List rooms -->
            <div ng-repeat="room in home.rooms">
              <a class="room-name" ng-click="home.setCurrentRoom(room)"> {{ room.$value }}
              </a>
            </div>
        </div>

        <!-- Messages -->
        <section class="messages">
          <h1>{{ home.currentRoom.$value }}</h1>
          <div class="messages-body" ng-repeat="message in home.messages">
            <!-- <div class="message" ng-repeat="message in home.messages"> -->
              <p class="username">{{ message.username }} </p>
              <p class="timestamp">{{ message.sentAt | date : "shortTime" }}</p>
              <p class="content">{{ message.content }}</p>
          </div>
        </section>

        <!-- Send Messages -->
        <div class="message-field">
            <!--ngModel directive binds an input, select, textarea (or custom form control) to a property on the scope using NgModelController, which is created and exposed by this directive. -->
            <!--ngModel is responsible for: Binding the view into the model, which other directives such as input , textarea or select require.-->
            <input type="text" placeholder="Enter message..." class="message-box" ng-model="home.newMessage.content">
            <button class="btn-new-message" type="button" ng-click="home.sendMessage()">Send</button>

        </div>

    </div>
</main>
